const main_frame=document.querySelector("#main");var scene;function delay(e){return new Promise((t,a)=>{setTimeout(t,e)})}function getRandomInt(e){return Math.floor(Math.random()*e)}function create_copyrights(e){if("main"==e){let e=document.createElement("div");e.classList.add("copyrights"),main_frame.appendChild(e);let t=document.createElement("span");t.innerText="Â© 2019 Playtika Santa Monica LLC. All Rights Reserved",e.appendChild(t);let a=document.createElement("img");a.src="images/other/playtica_logo.png",e.appendChild(a)}}function create_bg(e){let t=document.createElement("img");if(t.classList.add(`${e}_bg`),t.src=`images/bg/${e}.png`,main_frame.appendChild(t),"final"==e){t.style.animationPlayState="running";for(let e=0;e<3;e++){let t=document.createElement("img");t.classList.add(`sparkle_${e}`),t.src="images/other/sparkle.png",main_frame.appendChild(t)}}}function create_table(e){let t=document.createElement("img");t.classList.add(`table_${e}`),t.src=`images/other/table_${e}.png`,main_frame.appendChild(t),"final"==e&&(t.style.animationPlayState="running")}function create_logo(e){let t=document.createElement("img");t.classList.add(`logo_${e}`),t.src=`images/other/${e}_logo.png`,main_frame.appendChild(t),"final"==e&&(t.style.animationPlayState="running")}let table_objects=["forms","plate","coffe","icecream","rollingpin"],final_table_objects=["forms","rollingpin"],eatable_objects=["cupcake","waffles","fail"];function makeRandomArr(e,t){return Math.random()-.5}function create_table_objects(e){let t=0;if("main"==e)for(;t<table_objects.length;){let e=document.createElement("img");e.src=`images/other/${table_objects[t]}.png`,e.classList.add(table_objects[t]),main_frame.appendChild(e),t++}if("final"==e)for(;t<final_table_objects.length;){let a=document.createElement("img");a.src=`images/other/${final_table_objects[t]}.png`,a.classList.add(final_table_objects[t]),a.classList.add(e),main_frame.appendChild(a),a.style.animationPlayState="running",t++}}function create_eatable_objects(e){if("main"==e){let e=0;for(;e<eatable_objects.length;){let t=document.createElement("img");t.src="images/other/dish_plate.png",t.classList.add("dish_plate"),t.classList.add(`dish_plate_${e}`),main_frame.appendChild(t);let a=document.createElement("img");a.src=`images/eat/${eatable_objects[e]}.png`,a.classList.add("eat"),a.classList.add(`eat_${e}`),main_frame.appendChild(a);let n=document.createElement("img");n.src="images/other/dish.png",n.alt="dish",n.classList.add("dish"),n.classList.add(`dish_${e}`),"fail"==eatable_objects[e]&&n.classList.add("fail"),"fail"!=eatable_objects[e]&&n.classList.add("win"),main_frame.appendChild(n),e++}}}function create_character(e){if("main"==e){let e=document.createElement("img");e.src="images/cat/hand.png",e.classList.add("cat_hand"),img_cat_body=document.createElement("img"),img_cat_body.src="images/cat/body.png",img_cat_body.classList.add("cat_body"),main_frame.appendChild(e),main_frame.appendChild(img_cat_body),setTimeout(()=>{e.style.bottom="0",img_cat_body.style.bottom="0"},250)}if("final"==e){let t=document.createElement("img");t.src="images/other/candice.png",t.classList.add("candice"),main_frame.appendChild(t);let a=document.createElement("img");a.src=`images/cat/${e}.png`,a.classList.add(`cat_${e}`),main_frame.appendChild(a),t.style.animationPlayState="running",a.style.animationPlayState="running",a.addEventListener("animationend",function(e){"cat_final"==e.animationName&&create_buttons("final")})}}function create_buttons(e){if("final"==e){let e=document.createElement("img");e.src="images/other/play_now.png",e.addEventListener("click",()=>{location = "https://play.google.com/store/apps/details?id=air.com.playtika.slotomania&hl=ru&gl=US"},!1),e.classList.add("button_play_now"),main_frame.appendChild(e),setTimeout(()=>{e.style.animationPlayState="running"},500),screen.width<500&&(e.style.width=.9*screen.width+"px"),e.addEventListener("animationend",function(t){"button_play_now"===t.animationName&&(setTimeout(()=>{e.style.bottom=getComputedStyle(e).bottom,e.style.animation="button_play_now_wait .8s linear infinite running"},500),setTimeout(()=>{let e=document.createElement("img");e.src="images/other/restart.png",e.classList.add("button_restart"),e.setAttribute("draggable",!1),main_frame.appendChild(e),delay(500).then(()=>{screen.height>screen.width?e.style.right=(screen.height-screen.width)/2+"px":e.style.right=screen.height/10+"px",e.addEventListener("click",restart,!1)})},500))}),drag_drop()}}function create_main_scene(e){"main"==e&&(main_frame.style.opacity="1"),create_bg(e),create_table(e),create_logo(e),create_table_objects(e),eatable_objects.sort(makeRandomArr),create_eatable_objects(e),dish_click(),create_character(e),setSize(e),set_position_for_all_objects(e),create_copyrights(e)}function result(e){let t=document.createElement("img");t.src="images/other/rays.png",t.classList.add("rays"),main_frame.appendChild(t);let a=document.createElement("img");a.src=`images/other/${e}.png`,a.classList.add(`${e}`),a.classList.add("scene_result"),main_frame.appendChild(a),t.style.animationPlayState="running",a.style.animationPlayState="running",a.addEventListener("animationend",function(e){"scene_result"===e.animationName&&setTimeout(()=>{create_main_scene("final")},500)}),drag_drop()}function dish_click(){let e=document.querySelectorAll(".dish");for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(){if(e[t].classList.remove("active"),"portrait-primary"===screen.orientation.type){let a,n,i=this.style.transform.split(" ");for(let e=0;e<i.length;e++)i[e].includes("translateY")&&(a=i[e].replace(/[^.\d]/g,"")),i[e].includes("translateX")&&(n=i[e].replace(/[^.\d]/g,""));e[t].style.left.slice(0,-2)>screen.height/2&&(e[t].style.transform="translateX"+`( ${-1*n+8}% ) `+"translateY"+`( ${a+50}% ) `+i[2]+" rotate(27deg)"),e[t].style.left.slice(0,-2)<=screen.height/2&&(e[t].style.transform="translateX"+`( ${-1*n-8}% ) `+"translateY"+`( ${a+50}% ) `+i[2]+" rotate(-27deg)")}this.classList.toggle("active"),this.classList.contains("fail")&&(scene="fail"),this.classList.contains("win")&&(scene="win"),result(scene)})}function drag_drop(){let e=document.querySelectorAll("img");for(let t=0;t<e.length;t++)e[t].setAttribute("draggable",!1)}function setSize(e){"main"==e&&("landscape-primary"===screen.orientation.type&&(main_frame.style.height=window.innerHeight+"px",main_frame.style.width=window.innerHeight+"px"),"portrait-primary"===screen.orientation.type&&(window.outerHeight>960&&(main_frame.style.height=window.outerHeight+"px",main_frame.style.width=window.outerHeight+"px",main_frame.style.transform=`translateX(${(window.outerHeight-window.outerWidth)/2*-1+"px"})`),window.outerHeight<=960&&(main_frame.style.height=window.outerHeight+"px",main_frame.style.width=main_frame.style.height,main_frame.style.transform=`translateX(${(main_frame.clientHeight-window.outerWidth)/2*-1+"px"}) scaleX(1)`)))}function set_position_for_all_objects(e){if("main"==e){let e=document.querySelectorAll("img");for(let t=0;t<e.length;t++)if(screen.height/screen.width>1.5){let a=Math.sqrt(screen.height/1.5/screen.width)/10;a+=a/10;let n=getComputedStyle(e[t]).left;e[t].style.left=n,n.includes("px")&&n.slice(0,-2)!=screen.height/2&&0!=n.slice(0,-2)&&(n.slice(0,-2)<screen.height/2&&(e[t].style.left=1*e[t].style.left.slice(0,-2)+screen.width*a+"px"),n.slice(0,-2)>screen.height/3&&(e[t].style.left=1*e[t].style.left.slice(0,-2)-screen.width*a+"px")),e[t].classList.contains("logo")||e[t].classList.contains("main_bg")||("cat_body"==e[t].classList.value||"cat_hand"==e[t].classList.value?(e[t].style.transform="translateX(-50%)",e[t].style.left="",e[t].style.left=n.slice(0,-2)-222*a+"px"):"table_main"==e[t].classList.value||"table_final"==e[t].classList.value?e[t].style.transform=`translateX(-50%) translateY(${15*a}%)`:e[t].style.transform=`translateX(-50%) translateY(${100*a}%) scale(.8)`)}else e[t].style.transform=""}}function restart(){main_frame.style.opacity="";let e=document.querySelectorAll("img");document.querySelector(".copyrights").remove(),setTimeout(()=>{for(let t=0;t<e.length;t++)e[t].remove();create_main_scene("main")},250)}eatable_objects.sort(makeRandomArr),create_main_scene("main"),window.addEventListener("resize",()=>{location.reload()},!1),drag_drop();